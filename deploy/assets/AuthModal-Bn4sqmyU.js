import{r as n,j as s}from"./vendor-DXIbDcKT.js";import{G as S,H as _,I as N,J as b,K as D,B as E}from"./index-BxowQSG-.js";import{I as d}from"./input-Bnzoa22X.js";import{u as C,a as A}from"./index-BqgSbNNI.js";function q({open:g,mode:m="signin",onOpenChange:c}){const{t:e}=C(),{signIn:x,signUp:p}=A(),[r,j]=n.useState(m),[o,w]=n.useState(""),[i,f]=n.useState(""),[y,l]=n.useState(!1),[u,h]=n.useState(""),v=async t=>{t.preventDefault(),h(""),l(!0);try{if(r==="signin"){const{error:a}=await x(o,i);if(a)throw a}else{if((i||"").length<6)throw new Error(e("auth.password_short","Password must be at least 6 characters"));const{error:a}=await p(o,i);if(a)throw a}c(!1)}catch(a){h(a.message||e("auth.generic_error","Something went wrong"))}finally{l(!1)}};return s.jsx(S,{open:g,onOpenChange:c,children:s.jsxs(_,{className:"sm:max-w-md",children:[s.jsxs(N,{children:[s.jsx(b,{children:r==="signin"?e("auth.sign_in","Sign in"):e("auth.create_account","Create account")}),s.jsx(D,{children:e("auth.sync_progress","Sign in to sync your learning progress across devices.")})]}),s.jsxs("form",{onSubmit:v,className:"space-y-4",children:[u&&s.jsx("div",{className:"text-red-600 text-sm",children:u}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm",children:e("auth.email","Email")}),s.jsx(d,{type:"email",value:o,onChange:t=>w(t.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm",children:e("auth.password","Password")}),s.jsx(d,{type:"password",value:i,onChange:t=>f(t.target.value),required:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(E,{type:"submit",disabled:y,children:r==="signin"?e("auth.sign_in","Sign in"):e("auth.create_account","Create account")}),s.jsx("button",{type:"button",className:"text-sm text-gray-600 hover:underline",onClick:()=>j(t=>t==="signin"?"signup":"signin"),children:r==="signin"?e("auth.switch_to_signup","Need an account? Sign up"):e("auth.switch_to_signin","Have an account? Sign in")})]})]})]})})}export{q as A};
