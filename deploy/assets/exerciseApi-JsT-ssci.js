import{h as d}from"./input-Bnzoa22X.js";function g(){let e=localStorage.getItem("ai-workshop-session-id");return e||(e="session-"+Date.now()+"-"+Math.random().toString(36).substr(2,9),localStorage.setItem("ai-workshop-session-id",e)),e}async function h(e){try{const t={exercise_type:e.exercise_type,responses:e.responses,user_session_id:e.user_session_id||g(),email:e.email,completion_status:e.completion_status||"in_progress",time_spent_minutes:e.time_spent_minutes||0,user_details:e.user_details},o=await d(t);if(!o.success)throw new Error(o.error||"Failed to save exercise response");return o}catch(t){throw console.error("Exercise submission error:",t),new Error("Failed to save exercise response")}}function m(e,t){switch(e){case"ai-tasks":const o=["currentRole","aiTasks","challenges","goals"],r=o.filter(s=>t[s]&&t[s].trim().length>0).length;return Math.round(r/o.length*100);case"future-planning":const n=["visionStatement","keyObjectives","challenges","timeline"],i=n.filter(s=>t[s]&&t[s].trim().length>0).length;return Math.round(i/n.length*100);case"tool-sharing":const l=["favoriteTools","workflowDescription","recommendations","wishList"],c=l.filter(s=>t[s]&&t[s].trim().length>0).length;return Math.round(c/l.length*100);case"assessment":const u=Object.keys(t).filter(s=>t[s]!==void 0&&t[s]!==null).length;return Math.round(u/5*100);default:return 0}}let a=null;function w(e,t,o=2e3){return new Promise(r=>{a&&clearTimeout(a),a=setTimeout(async()=>{try{const n=m(e,t),i=n>=75?"completed":"in_progress";await h({exercise_type:e,responses:t,completion_status:i}),console.log(`Auto-saved ${e} exercise (${n}% complete)`),r()}catch(n){console.warn("Auto-save failed:",n),r()}},o)})}export{w as a,m as c,g,h as s};
