import{r as x,j as e}from"./vendor-DXIbDcKT.js";import{B as y}from"./index-BxowQSG-.js";import{d as J,e as K,I as u,f as Q}from"./input-Bnzoa22X.js";import{A as H,q as X,C as $,e as ee,f as se,a as L,b as ae,P as re,L as c,S as g,h as f,i as j,j as N,k as i,B as k,l as te}from"./PageRouter-CdqKWnMu.js";import{t as b}from"./index-DGasXiiE.js";import{u as ie}from"./index-BqgSbNNI.js";import{M as le,C as ne}from"./star-CO8Q7DDS.js";import"./index-hfqQnxIx.js";const oe=[{id:"ai-fundamentals",price:350,featureCount:6},{id:"ai-for-business",price:470,featureCount:7},{id:"generative-ai",price:850,featureCount:6},{id:"agentic-ai",price:980,advanced:!0,featureCount:8}];function ge({selectedCourse:w,onBackToHome:C}){const{t:r,language:S}=ie(),[s,I]=x.useState({firstName:"",lastName:"",email:"",phone:"",company:"",position:"",courseId:w||"",preferredDate:"",preferredTime:"",numberOfParticipants:"1",locationPreference:"",budgetRange:"",specialRequirements:""}),[D,q]=x.useState(!1),[m,P]=x.useState(1),[t,v]=x.useState({}),[_,O]=x.useState(null),[R,T]=x.useState(!1),F=oe.find(a=>a.id===s.courseId),M=F?F.price*parseInt(s.numberOfParticipants||"1"):0,B=m/2*100,o=(a,l)=>{I(n=>({...n,[a]:l})),t[a]&&v(n=>({...n,[a]:""}))},A=(a,l)=>{switch(a){case"email":return l?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l)?"":"Please enter a valid email":"Email is required";case"phone":return l?"":"Phone is required";case"firstName":return l?"":"First name is required";case"lastName":return l?"":"Last name is required";case"courseId":return l?"":"Please select a workshop";case"preferredDate":if(!l)return"Please select a date";const h=new Date(l),d=new Date;return d.setHours(0,0,0,0),h<d?"Please select a future date":"";case"numberOfParticipants":return l?"":"Please select number of participants";default:return""}},E=a=>{switch(a){case 1:return s.firstName&&s.lastName&&s.email&&s.phone;case 2:return s.courseId&&s.preferredDate&&s.numberOfParticipants;default:return!0}},V=async()=>{const a=m===1?["firstName","lastName","email","phone"]:["courseId","preferredDate","numberOfParticipants"],l={};if(a.forEach(n=>{const h=A(n,s[n]);h&&(l[n]=h)}),v(l),Object.keys(l).length===0){if(m===1){T(!0);try{const n={firstName:s.firstName,lastName:s.lastName,email:s.email,phone:s.phone,company:s.company,position:s.position},h=await Q(n);h.success&&h.data&&(O(h.data.id),b.success("Progress saved! You can continue or come back later."))}catch(n){console.error("Error saving step 1 progress:",n)}finally{T(!1)}}P(n=>Math.min(n+1,2)),window.scrollTo({top:0,behavior:"smooth"})}else b.error("Please fix the errors before continuing")},W=()=>{P(a=>Math.max(a-1,1)),window.scrollTo({top:0,behavior:"smooth"})},z=x.useCallback(async a=>{a.preventDefault();const l=[],n={};if(["firstName","lastName","email","phone","courseId","preferredDate","numberOfParticipants"].forEach(d=>{const p=A(d,s[d]);p&&(n[d]=p,l.push(p))}),v(n),l.length>0){b.error(`Please fix ${l.length} error${l.length>1?"s":""} before submitting`);return}q(!0);try{const d={firstName:s.firstName.trim(),lastName:s.lastName.trim(),email:s.email.trim().toLowerCase(),phone:s.phone.trim(),company:s.company?.trim()||void 0,position:s.position?.trim()||void 0,workshopType:s.courseId,preferredDate:s.preferredDate,preferredTime:s.preferredTime?.trim()||void 0,numberOfParticipants:s.numberOfParticipants==="10+"?10:parseInt(s.numberOfParticipants),locationPreference:s.locationPreference?.trim()||void 0,budgetRange:s.budgetRange?.trim()||void 0,specialRequirements:s.specialRequirements?.trim()||void 0,language:S};let p;if(_?p=await J(_,d):p=await K(d),p.success)b.success(r("booking.success_submitted"),{description:"We'll contact you within 24 hours to confirm your workshop details.",duration:6e3}),I({firstName:"",lastName:"",email:"",phone:"",company:"",position:"",courseId:w||"",preferredDate:"",preferredTime:"",numberOfParticipants:"1",locationPreference:"",budgetRange:"",specialRequirements:""}),v({}),P(1),O(null),setTimeout(()=>{C()},2e3);else{const Z=p.error||p.message||"An error occurred while submitting your booking.";b.error(Z)}}catch(d){console.error("Booking submission error:",d),b.error("An unexpected error occurred. Please try again or contact support.")}finally{q(!1)}},[s,S,_,C,w,r]),Y=()=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-600",children:["Step ",m," of 2"]}),e.jsxs("span",{className:"text-sm font-medium text-primary",children:[Math.round(B),"% Complete"]})]}),e.jsx(re,{value:B,className:"h-2"})]}),G=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx(le,{className:"w-10 h-10 text-primary mx-auto mb-2"}),e.jsx("h2",{className:"text-lg font-semibold mb-1",children:r("booking.step1_title")}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Tell us about yourself"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"firstName",className:"text-base",children:[r("booking.first_name_label")," *"]}),e.jsx(u,{id:"firstName",value:s.firstName,onChange:a=>o("firstName",a.target.value),placeholder:r("booking.first_name_placeholder"),required:!0,className:`h-12 text-base ${t.firstName?"border-red-500":""}`}),t.firstName&&e.jsx("p",{className:"text-sm text-red-500",children:t.firstName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"lastName",className:"text-base",children:[r("booking.last_name_label")," *"]}),e.jsx(u,{id:"lastName",value:s.lastName,onChange:a=>o("lastName",a.target.value),placeholder:r("booking.last_name_placeholder"),required:!0,className:`h-12 text-base ${t.lastName?"border-red-500":""}`}),t.lastName&&e.jsx("p",{className:"text-sm text-red-500",children:t.lastName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"email",className:"text-base",children:[r("booking.email_label")," *"]}),e.jsx(u,{id:"email",type:"email",value:s.email,onChange:a=>o("email",a.target.value),placeholder:r("booking.email_placeholder"),required:!0,className:`h-12 text-base ${t.email?"border-red-500":""}`}),t.email&&e.jsx("p",{className:"text-sm text-red-500",children:t.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"phone",className:"text-base",children:[r("booking.phone_label")," *"]}),e.jsx(u,{id:"phone",type:"tel",value:s.phone,onChange:a=>o("phone",a.target.value),placeholder:r("booking.phone_placeholder"),required:!0,className:`h-12 text-base ${t.phone?"border-red-500":""}`}),t.phone&&e.jsx("p",{className:"text-sm text-red-500",children:t.phone})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"company",className:"text-base",children:"Company"}),e.jsx(u,{id:"company",value:s.company,onChange:a=>o("company",a.target.value),placeholder:"Your company name",className:"h-12 text-base"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"position",className:"text-base",children:"Position"}),e.jsx(u,{id:"position",value:s.position,onChange:a=>o("position",a.target.value),placeholder:"Your job title",className:"h-12 text-base"})]})]})]})]}),U=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx(ne,{className:"w-10 h-10 text-primary mx-auto mb-2"}),e.jsx("h2",{className:"text-lg font-semibold mb-1",children:r("booking.step2_title")}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Choose your workshop details"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"courseId",className:"text-base",children:[r("booking.select_workshop_label")," *"]}),e.jsxs(g,{value:s.courseId,onValueChange:a=>o("courseId",a),children:[e.jsx(f,{className:`h-12 text-base ${t.courseId?"border-red-500":""}`,children:e.jsx(j,{placeholder:r("booking.select_workshop_placeholder")})}),e.jsxs(N,{children:[e.jsx(i,{value:"ai-fundamentals",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:"AI Fundamentals"}),e.jsx(k,{variant:"secondary",className:"ml-2",children:"CHF 350"})]})}),e.jsx(i,{value:"ai-for-business",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:"AI for Business Intelligence"}),e.jsx(k,{variant:"secondary",className:"ml-2",children:"CHF 470"})]})}),e.jsx(i,{value:"generative-ai",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:"Generative AI for Business"}),e.jsx(k,{variant:"secondary",className:"ml-2",children:"CHF 850"})]})}),e.jsx(i,{value:"agentic-ai",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:"Agentic AI: Second Brain"}),e.jsx(k,{variant:"secondary",className:"ml-2",children:"CHF 980"})]})})]})]}),t.courseId&&e.jsx("p",{className:"text-sm text-red-500",children:t.courseId})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"preferredDate",className:"text-base",children:[r("booking.preferred_date_label")," *"]}),e.jsx(u,{id:"preferredDate",type:"date",value:s.preferredDate,onChange:a=>o("preferredDate",a.target.value),min:new Date().toISOString().split("T")[0],required:!0,className:`h-12 text-base ${t.preferredDate?"border-red-500":""}`}),t.preferredDate&&e.jsx("p",{className:"text-sm text-red-500",children:t.preferredDate})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"preferredTime",className:"text-base",children:"Preferred Time"}),e.jsxs(g,{value:s.preferredTime,onValueChange:a=>o("preferredTime",a),children:[e.jsx(f,{className:"h-12 text-base",children:e.jsx(j,{placeholder:"Select time"})}),e.jsxs(N,{children:[e.jsx(i,{value:"morning",children:"Morning (9:00 - 12:00)"}),e.jsx(i,{value:"afternoon",children:"Afternoon (13:00 - 16:00)"}),e.jsx(i,{value:"evening",children:"Evening (17:00 - 20:00)"}),e.jsx(i,{value:"flexible",children:"Flexible"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"locationPreference",className:"text-base",children:"Location Preference"}),e.jsxs(g,{value:s.locationPreference,onValueChange:a=>o("locationPreference",a),children:[e.jsx(f,{className:"h-12 text-base",children:e.jsx(j,{placeholder:"Select location"})}),e.jsxs(N,{children:[e.jsx(i,{value:"online",children:"Online (Zoom/Teams)"}),e.jsx(i,{value:"onsite",children:"On-site at your office"}),e.jsx(i,{value:"our-office",children:"At our office"}),e.jsx(i,{value:"flexible",children:"Flexible"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"budgetRange",className:"text-base",children:"Budget Range"}),e.jsxs(g,{value:s.budgetRange,onValueChange:a=>o("budgetRange",a),children:[e.jsx(f,{className:"h-12 text-base",children:e.jsx(j,{placeholder:"Select budget range"})}),e.jsxs(N,{children:[e.jsx(i,{value:"under-1000",children:"Under CHF 1,000"}),e.jsx(i,{value:"1000-2000",children:"CHF 1,000 - 2,000"}),e.jsx(i,{value:"2000-5000",children:"CHF 2,000 - 5,000"}),e.jsx(i,{value:"5000-8000",children:"CHF 5,000 - 8,000"}),e.jsx(i,{value:"8000-12000",children:"CHF 8,000 - 12,000"}),e.jsx(i,{value:"over-12000",children:"Over CHF 12,000"}),e.jsx(i,{value:"flexible",children:"Flexible"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(c,{htmlFor:"numberOfParticipants",className:"text-base",children:[r("booking.participants_label")," *"]}),e.jsxs(g,{value:s.numberOfParticipants,onValueChange:a=>o("numberOfParticipants",a),children:[e.jsx(f,{className:`h-12 text-base ${t.numberOfParticipants?"border-red-500":""}`,children:e.jsx(j,{placeholder:r("booking.participants_placeholder")})}),e.jsxs(N,{children:[[1,2,3,4,5,6,7,8,9].map(a=>e.jsxs(i,{value:a.toString(),children:[a," ",r("workshops.participants")]},a)),e.jsx(i,{value:"10+",children:r("booking.participants_10_plus_option")})]})]}),t.numberOfParticipants&&e.jsx("p",{className:"text-sm text-red-500",children:t.numberOfParticipants})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"specialRequirements",className:"text-base",children:r("booking.special_requirements_label")}),e.jsx(te,{id:"specialRequirements",value:s.specialRequirements,onChange:a=>o("specialRequirements",a.target.value),placeholder:r("booking.special_requirements_placeholder"),rows:4,className:"text-base resize-none"})]}),F&&e.jsxs($,{className:"relative overflow-hidden border border-primary/20 shadow-lg bg-white/90 backdrop-blur-sm",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/5 to-primary/10"}),e.jsxs(L,{className:"relative p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-semibold text-lg text-gray-900",children:r("booking.total_price_label")}),e.jsxs("span",{className:"text-2xl font-bold bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent",children:["CHF ",M.toLocaleString()]})]}),e.jsx("p",{className:"text-sm text-gray-600",children:r("booking.price_includes_note")})]})]})]})]});return e.jsxs("div",{className:"min-h-screen",children:[e.jsx("header",{className:"sticky top-0 z-40 w-full border-b border-gray-200/60 bg-white/95 backdrop-blur supports-[backdrop-filter]:bg-white/60",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(y,{variant:"ghost",size:"sm",onClick:C,className:"gap-2 hover:bg-muted/50",children:[e.jsx(H,{className:"w-4 h-4"}),"Back"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5 text-primary"}),e.jsx("h1",{className:"text-lg font-semibold",children:r("booking.modal_title")})]})]})})}),e.jsxs("main",{className:"container mx-auto px-4 py-6 max-w-2xl",children:[e.jsxs($,{className:"relative overflow-hidden border border-gray-200/60 shadow-2xl bg-white/90 backdrop-blur-sm",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-secondary/5"}),e.jsx(ee,{className:"relative pb-2",children:e.jsx(se,{className:"text-center text-lg font-semibold",children:r("booking.modal_desc")})}),e.jsxs(L,{className:"relative px-6 pb-6",children:[Y(),e.jsxs("form",{onSubmit:z,className:"space-y-6",children:[m===1&&G(),m===2&&U(),e.jsxs("div",{className:"flex flex-col gap-4 pt-4 border-t border-gray-200/60",children:[m>1&&e.jsx(y,{type:"button",variant:"outline",onClick:W,className:"w-full h-12 text-base border-gray-200/60 hover:border-primary/30 hover:bg-muted/50",children:r("booking.previous")}),m<2?e.jsx(y,{type:"button",onClick:V,className:"w-full h-12 text-base bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary text-white shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",disabled:!E(m)||R,children:R?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[r("booking.next"),e.jsx(H,{className:"w-4 h-4 ml-2 rotate-180"})]})}):e.jsx(y,{type:"submit",disabled:D||!E(2),className:"w-full h-12 text-base bg-gradient-to-r from-primary to-primary/90 hover:from-primary/90 hover:to-primary text-white shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105",children:D?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin mr-2"}),r("booking.processing")]}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),r("booking.book_workshop")]})}),e.jsx("p",{className:"text-xs text-gray-600 text-center",children:r("booking.no_credit_card_required")})]})]})]})]}),e.jsx("div",{className:"text-xs text-gray-600 text-center mt-6 pb-6",children:r("booking.footer_note")})]})]})}export{ge as WorkshopBookingPage};
