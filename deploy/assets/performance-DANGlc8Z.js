let f=class{constructor(){this.metrics={},this.observers=[],this.isInitialized=!1,this.initialize()}initialize(){this.isInitialized||typeof window>"u"||(this.isInitialized=!0,this.observeWebVitals(),this.observeLayoutShifts(),this.observeLongTasks(),this.optimizeImages(),this.preloadCriticalResources())}observeWebVitals(){if("PerformanceObserver"in window){try{const e=new PerformanceObserver(t=>{const r=t.getEntries().find(i=>i.name==="first-contentful-paint");r&&(this.metrics.fcp=r.startTime,this.reportMetric("FCP",r.startTime))});e.observe({entryTypes:["paint"]}),this.observers.push(e)}catch{}try{const e=new PerformanceObserver(t=>{const s=t.getEntries(),r=s[s.length-1];r&&(this.metrics.lcp=r.startTime,this.reportMetric("LCP",r.startTime))});e.observe({entryTypes:["largest-contentful-paint"]}),this.observers.push(e)}catch{}try{const e=new PerformanceObserver(t=>{t.getEntries().forEach(r=>{if(r.processingStart&&r.startTime){const i=r.processingStart-r.startTime;this.metrics.fid=i,this.reportMetric("FID",i)}})});e.observe({entryTypes:["first-input"]}),this.observers.push(e)}catch{}}}observeLayoutShifts(){if("PerformanceObserver"in window)try{let e=0;const t=new PerformanceObserver(s=>{s.getEntries().forEach(i=>{i.hadRecentInput||(e+=i.value)}),this.metrics.cls=e,this.reportMetric("CLS",e)});t.observe({entryTypes:["layout-shift"]}),this.observers.push(t)}catch{}}observeLongTasks(){if("PerformanceObserver"in window)try{const e=new PerformanceObserver(t=>{t.getEntries().forEach(r=>{r.duration>50&&this.reportLongTask(r.duration)})});e.observe({entryTypes:["longtask"]}),this.observers.push(e)}catch{}}optimizeImages(){if("IntersectionObserver"in window){const e=new IntersectionObserver(t=>{t.forEach(s=>{if(s.isIntersecting){const r=s.target;r.dataset.src&&(r.src=r.dataset.src,r.removeAttribute("data-src"),e.unobserve(r))}})},{rootMargin:"50px"});document.querySelectorAll("img[data-src]").forEach(t=>{e.observe(t)})}}preloadCriticalResources(){["/fonts/sigum/Sigum.woff2"].forEach(s=>{const r=document.createElement("link");r.rel="preload",r.href=s,r.as="font",r.type="font/woff2",r.crossOrigin="anonymous",document.head.appendChild(r)}),["/@optimized/hero-dots-optimized.webp","/body-noise-effect.svg"].forEach(s=>{const r=document.createElement("link");r.rel="preload",r.href=s,r.as="image",document.head.appendChild(r)})}reportMetric(e,t){typeof gtag<"u"&&gtag("event","web_vitals",{metric_name:e,metric_value:Math.round(t),metric_rating:this.getMetricRating(e,t)})}reportLongTask(e){typeof gtag<"u"&&gtag("event","long_task",{duration:Math.round(e),severity:e>200?"high":"medium"})}getMetricRating(e,t){const r={FCP:{good:1800,poor:3e3},LCP:{good:2500,poor:4e3},FID:{good:100,poor:300},CLS:{good:.1,poor:.25}}[e];return r?t<=r.good?"good":t<=r.poor?"needs-improvement":"poor":"unknown"}getMetrics(){return{...this.metrics}}disconnect(){this.observers.forEach(e=>e.disconnect()),this.observers=[]}static debounce(e,t){let s;return(...r)=>{clearTimeout(s),s=setTimeout(()=>e(...r),t)}}static throttle(e,t){let s;return(...r)=>{s||(e(...r),s=!0,setTimeout(()=>s=!1,t))}}static requestIdleCallback(e,t=2e3){return"requestIdleCallback"in window?window.requestIdleCallback(e,{timeout:t}):setTimeout(e,1)}},c=null;const l=()=>(c||(c=new f),c);class d{constructor(){this.metrics={lcp:null,fid:null,cls:null,ttfb:null,fcp:null},this.observers=[],this.initObservers(),this.measureTTFB()}initObservers(){if("PerformanceObserver"in window&&"LargestContentfulPaint"in window.PerformanceObserver.supportedEntryTypes){const e=new window.PerformanceObserver(t=>{const s=t.getEntries(),r=s[s.length-1];this.metrics.lcp=r.startTime,this.reportMetric("LCP",this.metrics.lcp)});e.observe({entryTypes:["largest-contentful-paint"]}),this.observers.push(e)}if("PerformanceObserver"in window&&"FirstInput"in window.PerformanceObserver.supportedEntryTypes){const e=new window.PerformanceObserver(t=>{const r=t.getEntries()[0];this.metrics.fid=r.processingStart-r.startTime,this.reportMetric("FID",this.metrics.fid)});e.observe({entryTypes:["first-input"]}),this.observers.push(e)}if("PerformanceObserver"in window&&"LayoutShift"in window.PerformanceObserver.supportedEntryTypes){let e=0;const t=new window.PerformanceObserver(s=>{const r=s.getEntries();for(const i of r)i.hadRecentInput||(e+=i.value);this.metrics.cls=e,this.reportMetric("CLS",this.metrics.cls)});t.observe({entryTypes:["layout-shift"]}),this.observers.push(t)}if("PerformanceObserver"in window&&"FirstContentfulPaint"in window.PerformanceObserver.supportedEntryTypes){const e=new window.PerformanceObserver(t=>{const r=t.getEntries()[0];this.metrics.fcp=r.startTime,this.reportMetric("FCP",this.metrics.fcp)});e.observe({entryTypes:["first-contentful-paint"]}),this.observers.push(e)}}measureTTFB(){if("performance"in window){const e=performance.getEntriesByType("navigation")[0];e&&(this.metrics.ttfb=e.responseStart-e.requestStart,this.reportMetric("TTFB",this.metrics.ttfb))}}reportMetric(e,t){t!==null&&typeof gtag<"u"&&gtag("event","web_vitals",{event_category:"Web Vitals",event_label:e,value:Math.round(e==="CLS"?t*1e3:t),non_interaction:!0})}getMetrics(){return{...this.metrics}}disconnect(){this.observers.forEach(e=>e.disconnect()),this.observers=[]}}function a(){document.querySelectorAll("img:not([loading])").forEach((e,t)=>{t>2&&e.setAttribute("loading","lazy")})}function p(){["/fonts/sigum/Sigum.woff2","/fonts/sigum/Sigum.woff2"].forEach(e=>{const t=document.createElement("link");t.rel="preload",t.href=e,t.as="font",t.type="font/woff2",t.crossOrigin="anonymous",document.head.appendChild(t)})}function h(){[{rel:"dns-prefetch",href:"//www.google-analytics.com"},{rel:"dns-prefetch",href:"//fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:""}].forEach(e=>{const t=document.createElement("link");Object.entries(e).forEach(([s,r])=>{t.setAttribute(s,r)}),document.head.appendChild(t)})}let o=null;function b(){typeof window<"u"&&!o&&(l(),o=new d,a(),p(),h(),m(),u())}function m(){["/@optimized/AI-Workshop-training-for-employees-switzerland-optimized.webp","/@optimized/hero-dots-optimized.webp"].forEach(e=>{const t=document.createElement("link");t.rel="preload",t.href=e,t.as="image",document.head.appendChild(t)})}function u(){let n=null;const e=()=>{n&&clearTimeout(n),n=setTimeout(()=>{a()},100)};window.addEventListener("scroll",e,{passive:!0})}function v(){return o?.getMetrics()||null}typeof window<"u"&&window.addEventListener("beforeunload",()=>{o?.disconnect()});export{h as addResourceHints,v as getPerformanceMetrics,b as initPerformanceMonitoring,p as optimizeFonts,a as optimizeImages};
